<?xml version="1.0" encoding="utf-8"?>
<s:Application 
        xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:d="http://ns.adobe.com/fxg/2008/dt"
        xmlns:s="library://ns.adobe.com/flex/spark" 
        width="780" height="560" backgroundColor="#ffffff" xmlns:th="http://ns.adobe.com/thermo/2009" xmlns:components="components.*"
        creationComplete="createcomplete(event)" enterFrame="enterframe(event)" xmlns:mx="library://ns.adobe.com/flex/halo">
	<fx:Script>
		<![CDATA[
			import mx.managers.PopUpManager;
			import poker.CardViewer;
			import item.playerItemsRequester;
			import item.shopRequester;
			import poker.poker;
			
			protected function Buttonitem_click():void
			{
				if(shopmenu.visible == false && playerinfo.visible == false)
				{
					shopmenu.visible = true;
					shopmenu.currentState="StateItemMain";
					// 进行一次道具列表的请求, 该次请求是初始请求，范围在0-12内
					playerItemsRequester.Instance().setRequest(0, 13);
					playerItemsRequester.Instance().send();
				}
			}


			protected function Buttonvita_click():void
			{
				if(shopmenu.visible == false && playerinfo.visible == false)
				{
					playerinfo.visible = true;
					playerinfo.currentState="StateMain";
				}
			}


			protected function Buttonfriend_click():void
			{
//				customcomponent11.currentState='State4_friend';
				var popup:CardViewer = CardViewer(PopUpManager.createPopUp(this, CardViewer, true));
			}


			protected function Buttonshop_click():void
			{
				if(shopmenu.visible == false && playerinfo.visible == false)
				{
					shopmenu.visible = true;
					shopmenu.currentState="StateShopMain";
					// 进行一次道具列表的请求, 该次请求是初始请求，范围在0-12内
					shopRequester.Instance().setRequest(0, 13);
					shopRequester.Instance().send();
				}
			}



//			protected function Button_click():void
//			{
//				customcomponent31.currentState='State3';
//				customcomponent11.currentState='State1';
//				customcomponent21.currentState='State2';
//			}
			protected function createcomplete(event:Event):void
			{
				// 使大厁E���E正常状态E并且完�E大厁E��初始化
				LobyManager.Instance.state = 0;
				// 发送更新大厁E���
				LobyNetManager.Instance.send(LobyNetManager.roomInfo);
			}
			
			protected function enterframe(event:Event):void
			{
				LobyManager.Instance.enterFrame();
			}

		]]>

	</fx:Script>
	<s:states>
		<s:State name="Page1" th:color="0xcc0000"/>
	</s:states>
	<fx:DesignLayer d:userLabel="bgp">
		<s:BitmapImage source="@Embed('/assets/BG_D_3.png')" resizeMode="scale" d:userLabel="BgP"/>
		<components:CustomComponent3 x="497" y="94" id="customcomponent31" d:userLabel="player_information&amp;chat_window">
		</components:CustomComponent3>
		<mx:Image x="36" y="40" id="imgAvatar" autoLoad="true"  scaleContent="true" maintainAspectRatio="true"/>
		<mx:Label x="82" y="31" id="textPlayname" height="17" width="69" fontWeight="bold" fontStyle="normal" textDecoration="none"/>
		<s:TextArea x="289" y="96" width="474" height="456" skinClass="components.CustomTextAreaSkin" editable="false" color="0xffffff">
			<s:content>
				{ruleIntroduce.ruleText}
			</s:content>
		</s:TextArea>
	</fx:DesignLayer>
	<mx:Canvas x="17" y="94" width="487" height="460" id="gameRoomCanvas"/>
	<fx:DesignLayer d:userLabel="button">
		<s:Button x="201" y="54" skinClass="components.Button_friend" d:userLabel="Button friend" click="Buttonfriend_click()"/>
		<s:Button x="103" y="56" skinClass="components.Button_Item" d:userLabel="Button item" click="Buttonitem_click()"/>
		<s:Button x="153" y="53" skinClass="components.Button_Vita" d:userLabel="Button vita" click="Buttonvita_click()"/>
		<s:Button x="290" y="26" skinClass="components.Button_Shop" d:userLabel="Button shop" click="Buttonshop_click()"/>
	</fx:DesignLayer>
	<fx:DesignLayer d:userLabel="game lest">
		<components:GameLbby x="5" y="93" id="customcomponent21" d:userLabel="Game lbby">
		<mx:Tree x="13" y="53" width="256" height="400" id="gameTreeView" doubleClickEnabled="true" itemDoubleClick="{LobyManager.Instance.LobyTreeItemClick(event)}" folderOpenIcon="@Embed(source='../res/treeroomiconOpen.png')" folderClosedIcon="@Embed(source='../res/treeroomiconClose.png')" defaultLeafIcon="@Embed(source='../res/treeroomiconNode.png')"
			alternatingItemColors="[#11241A, #11241A]" color="#ffffff"/>
		</components:GameLbby>
	</fx:DesignLayer>
	<fx:DesignLayer d:userLabel="massage" th:visible.Page2="false">
		<!--商店界面同时也是道具界面-->
		<components:Shop x="200" y="130" id="shopmenu">
		</components:Shop>
		<!--玩家信息-->
		<components:PlayerInfo x="200" y="130" id="playerinfo"/>
	</fx:DesignLayer>
	<mx:Label x="620" y="6" text="ver 1.5.2" width="64" textAlign="right" color="#FFFFFF"/>
</s:Application>
